# Valet Key Pattern

Application that does perform download and upload often uses a DMS service while the application is taking care of the bulk of the work the DMS service maybe used only as storage altough it comes with features that can help the application reduce its load, 
*Valet Key Pattern* is about off loading operations like data transfer operationsto external resources like storage that way the application does not have to deal with download and upload of the data as the storage mechanism does take care of it


The application in this case may have many users who download and upload new documents the web apps get the docs from the storage transfer it to the users, as well as store the new upload there, web application also take care of authentication authorisation and so on.

The storage is under utlised and does nothing but to store documents and mainly it is idle, in a distrubted system this means you would have many applications busy doing work which means they are not scalable nor cost effective

The solution that the pattern suggest is to introduce an access token that is generated by the application and has a limited scope of the request, this is then sent back to the client which could be either a browser or desktop or mobile app the token then can be used to access directly the storage to perfome the upload or the download

The application in this case is only responsible for authentication/authorisation and generating the token while the storage is only responsible for validating the tokens and the download and upload of the new documments

- Generated keys must be time limited
- Keys must have status activated/desactivated
- Keys must provide access only to small parth of the services
- Tokens must be sent only via https
- Application must restrict the number of actions or size of uploads/downloads
- Data must be validated on the storage
- Audit all the actions on the storage